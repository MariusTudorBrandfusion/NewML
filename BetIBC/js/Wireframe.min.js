var timer,markedElement,_wireframeMode=!1,toolsPanelOpen=!1,markingEnabled=!1,markableElements=["grid__col-md-12","grid__col-md-6","grid__col-md-4","grid__col-md-3","grid__col-md-2","expand-box","logo","typeahead","mini-cart","tools-navigation","menu","menu__item","widget","grid__cell","paragraph-container","buttons-collection","wire-image","btn","cart-table__price"];(Wireframe=function(){}).prototype.Init=function(e,t,a){if(1==e){document.addEventListener("DOMContentLoaded",(function(e){Wireframe.WireImages(),document.getElementById("rapidoCss").setAttribute("href",""),document.getElementById("igniteCss").setAttribute("href",""),document.body.classList.remove("u-hidden")})),document.body.classList.add("u-hidden");for(var r=document.getElementsByClassName("js-ajax-container"),m=0;m<r.length;m++)r[m].addEventListener("contentLoaded",(function(e){Wireframe.WireImages()}),!1);1==a&&(Wireframe.ToolsOverlay(),document.getElementById("productList")&&document.getElementById("productList").addEventListener("contentLoaded",(function(e){Wireframe.WireImages(),Wireframe.createMarkableElements()}),!1))}_wireframeMode=e},Wireframe.prototype.WireImages=function(){if(1==_wireframeMode){for(var e=document.getElementsByTagName("IMG"),t=0;t<e.length;t++){var a=e[t];if(!a.classList.contains("u-hidden")&&!a.classList.contains("lightbox__image")){var r=document.createElement("DIV");r.classList.add("wire-image"),a.parentElement.insertBefore(r,a.parentNode.firstChild)}a.classList.contains("lightbox__image")&&a.classList.add("u-visually-hidden"),a.classList.add("u-hidden")}var m=document.getElementsByClassName("multiple-paragraphs-container");for(t=0;t<m.length;t++){""!=(o=m[t]).getAttribute("style")&&(o.setAttribute("style",""),o.classList.add("wire-image-lines"))}var n=document.getElementsByClassName("paragraph-container");for(t=0;t<n.length;t++){var o;""!=(o=n[t]).getAttribute("style")&&(o.setAttribute("style",""),o.classList.add("wire-image-lines"))}var i=document.getElementsByClassName("u-color-warning--bg");for(t=0;t<i.length;t++){var s=i[t];s.classList.remove("u-color-warning--bg"),s.classList.add("u-color-light-gray--bg")}}},Wireframe.prototype.ToolsOverlay=function(){var e=document.createElement("DIV");e.id="ToolsOverlay",e.classList.add("wireframe-tools-overlay"),e.classList.add("u-hidden"),document.body.insertBefore(e,document.body.firstChild),window.onscroll=function(){Wireframe.resizeOverlay()},Wireframe.resizeOverlay()},document.addEventListener("DOMContentLoaded",(function(e){document.getElementById("WireframeToolsTrigger")&&document.getElementById("WireframeToolsTrigger").checked&&(toolsPanelOpen=!1,Wireframe.toggleTools())})),Wireframe.prototype.resizeOverlay=function(e){timer&&window.clearTimeout(timer),timer=window.setTimeout((function(){document.body.scrollHeight-window.innerHeight!=window.pageYOffset&&(document.getElementById("ToolsOverlay").style.height=Math.round(document.body.scrollTop+window.innerHeight)+"px")}),100)},Wireframe.prototype.createMarkableElements=function(){for(var e=0,t=0;t<markableElements.length;t++)for(var a=document.getElementsByClassName(markableElements[t]),r=0;r<a.length;r++){var m=a[r];m.setAttribute("data-mark-id","Mark_"+e),m.classList.add("js-markable"),e++}document.getElementById("comments").addEventListener("itemCreated",Wireframe.createMarksFromData,!1)},Wireframe.prototype.toggleTools=function(){document.getElementById("wireframeTools");var e=document.getElementById("ToolsOverlay");toolsPanelOpen?(e.classList.add("u-hidden"),Wireframe.removeAllMarks(),document.removeEventListener("mousemove",(function(e){Wireframe.markElement(e)}),!1),markingEnabled=!1,Wireframe.cleanUp(),toolsPanelOpen=!1):(e.classList.remove("u-hidden"),Dynamo.UpdateContent("comments"),toolsPanelOpen=!0)},Wireframe.prototype.markElement=function(e){if(markingEnabled)for(var t,a=e.clientX,r=e.clientY,m=document.getElementsByClassName("js-markable"),n=0;n<m.length;n++){var o=m[n],i=o.getBoundingClientRect();if(a>=i.left&&a<=i.right&&r>=i.top&&r<=i.bottom){if(markedElement=o,t&&t.classList.remove("comment-mark--hover"),markedElement!=t&&markedElement.classList.add("comment-mark--hover"),t=markedElement,document.getElementById("Comment"))for(var s=document.getElementsByClassName("js-comment"),l=0;l<s.length;l++)s[l].id=="Comment_"+markedElement.id.slice(-1)?s[l].classList.add("comment--active"):s[l].classList.remove("comment--active")}else o.classList.remove("comment-mark--hover")}},Wireframe.prototype.setMarkOnClick=function(e){markedElement&&(Wireframe.cleanUp(),document.getElementById("WireframeToolsHelpText").classList.add("u-hidden"),document.getElementById("CreateCommentForm").classList.remove("u-visually-hidden"),markedElement.classList.add("js-wireframe-mark"),document.getElementById("TargetElement").value=markedElement.getAttribute("data-mark-id"),Wireframe.renderSingleMark(markedElement,""),markedElement.classList.add("comment-mark--active"))},Wireframe.prototype.cleanUp=function(){for(var e=document.getElementsByClassName("js-wireframe-mark"),t=0;t<e.length;t++){var a=e[t];a.classList.remove("js-wireframe-mark"),a.classList.remove("comment-mark"),a.classList.remove("comment-mark--active"),a.getElementsByClassName("comment-mark__tag")[0]&&a.getElementsByClassName("comment-mark__tag")[0].parentNode.removeChild(a.getElementsByClassName("comment-mark__tag")[0])}},Wireframe.prototype.renderSingleMark=function(e,t){e.classList.add("comment-mark");var a=document.createElement("DIV");a.classList.add("comment-mark__tag"),a.innerText=t,e.insertBefore(a,e.firstChild)},Wireframe.prototype.createMarksFromData=function(e){for(var t=e.detail.Comment,a=0;a<t.length;a++){for(var r,m=document.getElementsByClassName("js-markable"),n=0;n<m.length;n++){var o=m[n];o.getAttribute("data-mark-id")==t[a].targetElement&&(r=o)}r.id="SelectedMark_"+t[a].count,Wireframe.renderSingleMark(r,t[a].count)}markingEnabled=!0,document.addEventListener("mousemove",(function(e){Wireframe.markElement(e)}),!1),document.getElementById("ToolsOverlay").addEventListener("click",(function(e){Wireframe.setMarkOnClick(e)}),!1)},Wireframe.prototype.removeAllMarks=function(){for(var e=document.getElementsByClassName("js-markable"),t=0;t<e.length;t++){var a=e[t];a.classList.remove("comment-mark"),a.classList.remove("comment-mark--hover"),a.classList.remove("comment-mark--active"),a.getElementsByClassName("comment-mark__tag")[0]&&a.getElementsByClassName("comment-mark__tag")[0].parentNode.removeChild(a.getElementsByClassName("comment-mark__tag")[0])}};var Wireframe=new Wireframe;