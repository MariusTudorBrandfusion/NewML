@inherits Dynamicweb.Rendering.RazorTemplateBase<Dynamicweb.Rendering.RazorTemplateModel<Dynamicweb.Rendering.Template>>

@foreach (LoopItem item in GetLoop("ItemPublisher:Items.List"))
{
    string link = "/Default.aspx?ID=" + item.GetString("ItemPublisher:Item.Field.PageId");

    <div class="grid__col-md-4 grid__col-sm-4">
        <a href="@link" class="responsive-image responsive-image--4-3">
            <img src="/Admin/Public/GetImage.ashx?width=420&height=400&amp;crop=5&amp;Compression=75&amp;image=@item.GetString("ItemPublisher:Item.Image")" />
        </a>
        
        <div class="article_details">
            <small class="article__subscription">
                @if (!(string.IsNullOrWhiteSpace(item.GetString("ItemPublisher:Item.Author")) && string.IsNullOrWhiteSpace(item.GetString("ItemPublisher:Item.Date"))))
                {
                    <text>@Translate("Written")</text>
                }
                @if (!string.IsNullOrWhiteSpace(item.GetString("ItemPublisher:Item.Author")))
                {
                    <text>@Translate("by") @item.GetString("ItemPublisher:Item.Author")</text>
                }
                @if (!string.IsNullOrWhiteSpace(item.GetString("ItemPublisher:Item.Date")))
                {
                    <text>@Translate("on") @item.GetDate("ItemPublisher:Item.Date").ToString("dd.MM.yyyy, HH:mm")</text>
                }
            </small>

            <h2 class="article__header">@item.GetString("ItemPublisher:Item.Title")</h2>
            <p>@item.GetString("ItemPublisher:Item.Summary")</p>

            <div class="grid__cell--footer">
                <a href="@link" class="btn btn--primary dw-mod u-no-margin">@Translate("Read more")</a>
            </div>
        </div>
    </div>
}
